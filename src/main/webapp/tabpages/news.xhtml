<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:b="http://bootsfaces.net/ui"
    xmlns:p="http://primefaces.org/ui"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:botDetect="https://captcha.com/java/jsf"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <h:outputScript library="js" name="generalviewcontrol.js"/>
    
    <div id="news-page" class="margin-normal padding-normal ">
        <p:card>
            <h:form prependId="false">
                <p:dataScroller id="news-data" value="#{NewsHandle.postList}" var="postContent" chunkSize="2" >
                    <f:facet name="header">
                        <h5>Last updated: #{GeneralViewTools.todayDate}</h5>
                        <p:commandButton type="button" value="Refresh" action="#{GeneralViewTools.executePrimeFacesUpdate('news-data')}" update="news-data" icon="pi pi-refresh"/>
                    </f:facet>

                    <div>                       
                        <p:fieldset legend="#{postContent.title}" toggleable="true" toggleSpeed="500">
                            <p class="m-0">
                               #{BeanTools.shortenText(postContent.text,20)}
                            </p>
                        </p:fieldset>
                    </div>

                    <f:facet name="loader">
                        <div class="text-center margin-normal">
                            <p:commandButton type="button" value="More" icon="pi pi-refresh"/>
                        </div>
                    </f:facet>
                </p:dataScroller>
            </h:form>
        </p:card>
    </div>

</ui:composition>
